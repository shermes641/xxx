<div id="modal-overlay" class="modal-overlay"></div>
<div ng-controller="WaterfallController">
    <div ng-include="subHeader"></div>
    <div ng-include="appList"></div>
    <div id="waterfall-edit" class="split_content waterfall_list">
        <div id="waterfall-edit-success" class="flash-message success"></div>
        <div id="waterfall-edit-error" class="flash-message error"></div>
        <h1>{{waterfallData.waterfall.name}} Waterfall</h1>
        <button ng-click="toggleEditAppModal()" id="waterfall-app-settings-button">App Settings</button>
        <div id="waterfall_sub_header">
            <div class="app-token">
                API Token
                <code class="copy-paste-code">{{waterfallData.waterfall.appToken}}</code>
            </div>

            <modal-dialog show='modalShown' width='760px'>
                <div ng-show="showEditAppModal">
                    <div ng-include="editAppModal"></div>
                </div>
                <div ng-show="showNewAppModal">
                    <div ng-include="newAppModal"></div>
                </div>
                <div ng-show="showWaterfallAdProviderModal">
                    <div ng-include="editWaterfallAdProviderModal"></div>
                </div>
            </modal-dialog>

            <div class="waterfall-buttons">
                <h4 class="tooltip" data-title="Optimized Mode will ensure that your waterfall will be ordered by eCPM with the highest paying partners at the top.">?</h4>
                <label class="text-label">Optimized Mode</label>
                <div class="onoffswitch">
                    <input ng-click="" ng-model="waterfallData.waterfall.optimizedOrder" id="" type="checkbox" name="optimized-order" class="onoffswitch-checkbox" id="optimized-mode-switch">
                    <label class="onoffswitch-label" for="optimized-mode-switch">
                        <span class="onoffswitch-inner"></span>
                        <span class="onoffswitch-switch"></span>
                    </label>
                </div>
            </div>

            <div class="waterfall-buttons">
                <h4 class="tooltip" data-title="Test Mode will allow you to test your integration by playing a video with an unlimited frequency cap.">?</h4>
                <label class="text-label">Test Mode</label>
                <div class="onoffswitch">
                    <input ng-change="toggleTestMode()" ng-disabled="disableTestModeToggle" ng-model="waterfallData.waterfall.testMode" type="checkbox" name="test-mode" class="onoffswitch-checkbox" id="test-mode-switch">
                    <label class="onoffswitch-label" for="test-mode-switch">
                        <span class="onoffswitch-inner"></span>
                        <span class="onoffswitch-switch"></span>
                    </label>
                </div>
            </div>
        </div>

        <div id="initialize_sdk" ng-class="{open: showCodeBlock}">
            <div ng-click="toggleCodeBlock()" id="arrow_dropdown"></div>
            Initialize HyprMediate in your SDK
            <div ng-show="showCodeBlock" class="code-block">
                <div class="waterfall-edit-description">
                    Copy and paste this following code, wherever you plan on initializing HyprMediate.  For a step by step integration guide and suggestions on generating a user ID, please see our <a href="http://documentation.hyprmx.com/display/IS/Implementing+Basic+Features">documentation</a>.
                </div>
                <code class="waterfall-edit-description copy-paste-code">
                    // Be sure to define myUsersUniqueId() using whatever strategy you choose to generate a user ID.
                    <br/>
                    @{"NSString *userId = myUsersUniqueId();"}
                    <br/>
                    @{"[HYPRMediate initialize:@\"" + waterfall.appToken + "\" userId:userId];"}
                </code>
            </div>
        </div>

        <div class="waterfall ul">
            <ul ng-repeat="adProviderConfig in waterfallData.waterfallAdProviderList" id="waterfall-list" class="waterfall-sort">
                <li ng-class="{waterfall: adProviderConfig.active, inactive: ''}">
                    <div ng-class="{'hideable hideable-wap-info': adProviderConfig.active, 'hideable hidden-wap-info': ''}">
                        <div class="waterfall-app-info">
                            <div ng-show="{{adProviderConfig.pending}}">
                                <h4>{{adProviderConfig.name}} is Pending</h4>
                                <h5>To check if it's ready, please refresh your browser.</h5>
                            </div>
                            <div ng-hide="{{adProviderConfig.pending}}">
                                <h3>{{adProviderConfig.name}}</h3>
                                <div class="waterfall ul li b">
                                    <label>eCPM:</label>
                                    <div name="cpm" style="display: inline-block;">${{adProviderConfig.cpm | monetaryFormat}}</div>
                                </div>
                            </div>
                        </div>
                        <div ng-hide="{{adProviderConfig.pending}}">
                            <button ng-hide="adProviderConfig.unconfigured" ng-click="toggleWapStatus(adProviderConfig)" class="status" type="submit" name="status">
                                {{adProviderConfig.active | waterfallStatus}}
                            </button>
                            <button ng-click="editWaterfallAdProvider(adProviderConfig)" name="configure-wap" class="configure active-button" type="submit">
                                Configure
                            </button>
                        </div>
                        <div class="waterfall-drag">
                            <div class="waterfall-drag-1"></div>
                            <div class="waterfall-drag-2"></div>
                            <div class="waterfall-drag-3"></div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>
<div id="edit-waterfall-ad-provider" class="modal"></div>
